<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>¬øUn mundo de locos?</title>
    
    <!-- 1. Cargar React y ReactDOM -->
    <script crossorigin="anonymous" src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin="anonymous" src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- 2. Cargar Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* --- Colores y Variables --- */
        :root {
            --color-fondo-mostaza: #E1AD01;
            --color-texto-negro: #000000;
            --color-texto-blanco: #FFFFFF;
            --color-rojo: #D92626;
            --color-postit: #fff7a3;
        }

        body {
            background-color: var(--color-fondo-mostaza);
            font-family: 'Dengxian', 'Arial', sans-serif;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            box-sizing: border-box;
        }

        #root {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }

        /* Mensaje de error visible */
        #error-display {
            display: none;
            background: #fff;
            color: red;
            padding: 20px;
            border: 4px solid red;
            margin: 20px;
            font-weight: bold;
            font-family: monospace;
            z-index: 1000;
        }

        /* Indicador de carga simple */
        #root:empty::before {
            content: "Cargando juego...";
            font-size: 2rem;
            color: white;
            margin-top: 50px;
        }

        /* --- T√≠tulo (Pancarta) --- */
        .titulo-pancarta {
            background-color: var(--color-texto-blanco);
            color: var(--color-texto-negro);
            font-size: 2.5rem;
            font-weight: bold;
            text-align: center;
            padding: 15px 30px;
            margin-bottom: 50px;
            box-shadow: 
                0 0 0 4px var(--color-texto-negro),
                0 0 0 8px var(--color-fondo-mostaza),
                0 0 0 12px var(--color-rojo),
                0 0 0 16px var(--color-texto-negro);
        }

        /* --- Contenedores --- */
        .pantalla-inicio {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-grow: 1;
            width: 100%;
            padding-top: 50px;
        }

        .area-juego {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 1000px;
        }

        /* --- Botones --- */
        button {
            cursor: pointer;
            font-family: inherit;
            border: 4px solid var(--color-texto-negro);
            font-weight: bold;
            text-transform: uppercase;
        }

        .btn-crear {
            background-color: var(--color-rojo);
            color: var(--color-texto-blanco);
            font-size: 3rem;
            padding: 20px 60px;
            transition: transform 0.1s;
        }

        .btn-crear:hover {
            transform: scale(1.05);
        }

        .btn-crear:active {
            transform: scale(0.95);
        }

        .btn-mas {
            background-color: var(--color-texto-negro);
            color: var(--color-texto-blanco);
            font-size: 1.5rem;
            padding: 15px 40px;
            margin-top: 30px;
            border: none;
        }

        .btn-mas:hover {
            background-color: #333;
        }

        /* --- Columnas y Elementos del Juego --- */
        .contenedor-columnas {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            width: 100%;
            flex-wrap: wrap;
            gap: 40px;
        }

        .columna {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 220px;
        }

        .icono-grande {
            font-size: 4rem;
            margin-bottom: 15px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* --- Post-its --- */
        .post-it {
            background-color: var(--color-postit);
            width: 100%;
            height: 200px;
            padding: 20px;
            position: relative;
            box-shadow: 4px 4px 15px rgba(0,0,0,0.2);
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            font-size: 1.4rem;
            line-height: 1.2;
            color: var(--color-texto-negro);
            transform: rotate(-1deg);
            box-sizing: border-box;
        }

        .chincheta {
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            width: 24px;
            height: 24px;
            border-radius: 50%;
            box-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            z-index: 10;
        }
        .chincheta-roja { background-color: var(--color-rojo); }
        .chincheta-verde { background-color: green; }
        .chincheta-azul { background-color: blue; }
    </style>

    <!-- Script para capturar errores -->
    <script>
        window.onerror = function(message, source, lineno, colno, error) {
            var display = document.getElementById('error-display');
            display.style.display = 'block';
            display.innerHTML += '<p>Error: ' + message + '<br><small>L√≠nea: ' + lineno + '</small></p>';
            console.error(error);
        };
    </script>
</head>
<body>
    <div id="error-display"></div>
    <div id="root"></div>

    <!-- 3. L√≥gica de la aplicaci√≥n -->
    <script type="text/babel" data-presets="env,react">
        const { useState } = React;
        const { createRoot } = ReactDOM;

        // --- DATOS ---
        const lugares = [
          "En Espa√±a", "En mi universidad", "En Hong Kong", "En Castilla y Le√≥n",
          "En la Ciudad de M√©xico", "En Buenos Aires", "En el colegio",
          "En la biblioteca", "En la oficina", "En un hospital", "En la playa",
          "En el metro de Madrid", "En casa de mis padres", "En una boda", "En el cine"
        ];

        const acciones = [
          "utilizar la calculadora", "usar el diccionario", "quedarse a comer",
          "tener el m√≥vil encendido", "comer chicle", "llevar uniforme",
          "tutear al profesor", "ayudar a los ancianos", "tirar basura al suelo",
          "escuchar m√∫sica alta", "lavar los platos", "hablar en voz alta",
          "llegar tarde", "fumar en la puerta", "jugar a la pelota",
          "llevar chanclas", "cocinar paella los domingos",
          "mirar a la gente a los ojos",
          "cruzar un paso de peatones con el sem√°foro en verde",
          "dar las gracias", "dar los buenos d√≠as", "dar un beso", "dar un abrazo",
          "dar la mano al saludar", "invitar a una fiesta", "invitar a comer a casa",
          "invitar a un caf√©", "enviar un mensaje", "enviar una invitaci√≥n",
          "enviar una felicitaci√≥n", "enviar una nota de agradecimiento",
          "aceptar un regalo", "rechazar una invitaci√≥n", "hacer un regalo",
          "hacer un cumplido", "hacer un elogio"
        ];

        const normas = [
          { icono: "‚ùå", texto: "poder" },
          { icono: "üôÖ", texto: "deber" },
          { icono: "üö´", texto: "prohibido" },
          { icono: "‚úÖ", texto: "obligatorio" },
          { icono: "‚ùå", texto: "permitido" },
          { icono: "üëç", texto: "permitido" }
        ];

        const App = () => {
          const [started, setStarted] = useState(false);
          const [gameState, setGameState] = useState({
            lugar: '...',
            norma: { icono: 'üö´', texto: '...' },
            accion: '...'
          });

          const obtenerAleatorio = (lista) => {
            return lista[Math.floor(Math.random() * lista.length)];
          };

          const generarPartida = () => {
            setGameState({
              lugar: obtenerAleatorio(lugares),
              norma: obtenerAleatorio(normas),
              accion: obtenerAleatorio(acciones)
            });
          };

          const handleStart = () => {
            setStarted(true);
            generarPartida();
          };

          return (
            <React.Fragment>
              {/* T√≠tulo (Pancarta) */}
              <div className="titulo-pancarta">¬øUn mundo de locos?</div>

              {/* Pantalla de Inicio */}
              {!started && (
                <div className="pantalla-inicio">
                  <button className="btn-crear" type="button" onClick={handleStart}>
                    crear
                  </button>
                </div>
              )}

              {/* √Årea del Juego */}
              {started && (
                <div className="area-juego">
                  <div className="contenedor-columnas">
                    
                    {/* Columna 1: LUGAR */}
                    <div className="columna">
                      <div className="icono-grande">üåç</div>
                      <div className="post-it">
                        <div className="chincheta chincheta-roja"></div>
                        <p>{gameState.lugar}</p>
                      </div>
                    </div>

                    {/* Columna 2: NORMA */}
                    <div className="columna">
                      <div className="icono-grande">{gameState.norma.icono}</div>
                      <div className="post-it">
                        <div className="chincheta chincheta-verde"></div>
                        <p>{gameState.norma.texto}</p>
                      </div>
                    </div>

                    {/* Columna 3: ACCI√ìN */}
                    <div className="columna">
                      <div className="icono-grande">ü§î</div>
                      <div className="post-it">
                        <div className="chincheta chincheta-azul"></div>
                        <p>{gameState.accion}</p>
                      </div>
                    </div>

                  </div>

                  <button className="btn-mas" type="button" onClick={generarPartida}>
                    m√°s
                  </button>
                </div>
              )}
            </React.Fragment>
          );
        };

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
